---
layout: post
title: Создание расширения для РНР 7 в Docker 
---

Нужен Докер работающий.

[source code](https://github.com/davletyarov/php7ext)

Так.
Запускам докер-композ, переходим в контейнер **php-container**
оказываемся в директории **/usr/src/php/ext/hello** где лежат исходники нашего свежосозданного расширения.

В текущей директории выполняем следующие команды:
```bash
phpize        # используется для подготовки окружения PHP-модуля. 
./configure   # конфигурируем
make          # собираем, нужно убедиться что нет ошибок в консоли
make test     # протестируем, и после отвечам нет на вопрос о посылке
make install  # устанавливаем расширение hello.so в директорию
service apache2 restart # перезапускаем апач
```

Запускаем контейнер **php-container** и переходим в [http://localhost:8000/](http://localhost:8000/)
и видем результаты от двух демо функции 
```php
echo hello_test1();
echo hello_test2('это же новое расширение');
```

можно внутри контейнера проделать
```bash
php -i | grep hello # говорящяя что модуль успешно загружен hello support => enabled
```
